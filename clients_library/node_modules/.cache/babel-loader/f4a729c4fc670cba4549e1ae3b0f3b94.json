{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u0421\\u0415\\u041C\\u0415\\u0421\\u0422\\u0420 6\\\\RECIPE\\\\client\\\\src\\\\pages\\\\AuthG.js\";\nimport React, { Component, useContext } from 'react';\nimport { Context } from '..';\nimport { login, registration1 } from '../http/userAPI';\nimport { LOGIN_ROUTE } from '../utils/consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AuthG extends Component {\n  constructor(...args) {\n    var _s = $RefreshSig$();\n\n    super(...args);\n    this.state = {\n      name: null,\n      imgUrl: null\n    };\n    this.signIn = _s(() => {\n      _s();\n\n      const {\n        user\n      } = useContext(Context);\n      const isLogin = location.pathname === LOGIN_ROUTE;\n      const auth2 = window.gapi.auth2.getAuthInstance();\n      auth2.signIn().then(googleUser => {\n        const profile = googleUser.getBasicProfile();\n        let data;\n\n        if (isLogin) {\n          data = login(profile.getEmail(), googleUser.getAuthResponse().id_token);\n          console.log(data);\n        } else {\n          data = registration1(profile.getName(), profile.getEmail(), googleUser.getAuthResponse().id_token);\n        }\n\n        user.setUser(user);\n        user.setIsAuth(true);\n        this.setState({\n          name: profile.getName(),\n          imgUrl: profile.getImageUrl()\n        });\n      });\n    }, \"JGtbL9nF23m+KDtp3kj55mw9GTc=\");\n\n    this.signOut = () => {\n      const auth2 = window.gapi.auth2.getAuthInstance();\n      auth2.signOut().then(() => {\n        this.setState({\n          name: null,\n          password: null\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    const _onInit = auth2 => {\n      console.log('init OK', auth2);\n    };\n\n    const _onError = err => {\n      console.log('error', err);\n    };\n\n    window.gapi.load('auth2', function () {\n      window.gapi.auth2.init({\n        client_id: '225202864346-k01k8j33vmutqn1nn0hforpo2alvv8va.apps.googleusercontent.com'\n      }).then(_onInit, _onError);\n    });\n  }\n\n  render() {\n    const {\n      name,\n      password\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"App-header\",\n        children: [!name && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.signIn,\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), !!name && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.signOut,\n          children: \"Log out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 22\n        }, this), name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default AuthG;","map":{"version":3,"sources":["D:/СЕМЕСТР 6/RECIPE/client/src/pages/AuthG.js"],"names":["React","Component","useContext","Context","login","registration1","LOGIN_ROUTE","AuthG","state","name","imgUrl","signIn","user","isLogin","location","pathname","auth2","window","gapi","getAuthInstance","then","googleUser","profile","getBasicProfile","data","getEmail","getAuthResponse","id_token","console","log","getName","setUser","setIsAuth","setState","getImageUrl","signOut","password","componentDidMount","_onInit","_onError","err","load","init","client_id","render"],"mappings":"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","sourcesContent":["import React, { Component, useContext } from 'react'\r\nimport { Context } from '..'\r\nimport { login, registration1 } from '../http/userAPI'\r\nimport { LOGIN_ROUTE } from '../utils/consts'\r\n\r\n\r\n\r\nclass AuthG extends Component {\r\n\r\n    \r\n\r\n  state = {\r\n    name: null,\r\n    imgUrl: null,\r\n  }\r\n  componentDidMount() {\r\n    const _onInit = auth2 => {\r\n      console.log('init OK', auth2)\r\n    }\r\n    const _onError = err => {\r\n      console.log('error', err)\r\n    }\r\n    window.gapi.load('auth2', function() {\r\n      window.gapi.auth2\r\n        .init({\r\n          client_id: '225202864346-k01k8j33vmutqn1nn0hforpo2alvv8va.apps.googleusercontent.com',\r\n        })\r\n        .then(_onInit, _onError)\r\n    })\r\n  }\r\n  signIn = () => {\r\n    const {user} = useContext(Context)\r\n    const isLogin = location.pathname === LOGIN_ROUTE\r\n    const auth2 = window.gapi.auth2.getAuthInstance()\r\n    auth2.signIn().then(googleUser => {\r\n      const profile = googleUser.getBasicProfile()\r\n\r\n      let data;\r\n            if (isLogin) {\r\n                data = login(profile.getEmail(), googleUser.getAuthResponse().id_token);\r\n                console.log(data)\r\n            } else {\r\n                data = registration1(profile.getName(), profile.getEmail(), googleUser.getAuthResponse().id_token);\r\n            }\r\n            user.setUser(user)\r\n            user.setIsAuth(true)\r\n      \r\n      this.setState({\r\n        name: profile.getName(),\r\n        imgUrl: profile.getImageUrl(),\r\n      })\r\n    })\r\n    \r\n  }\r\n  signOut = () => {\r\n    const auth2 = window.gapi.auth2.getAuthInstance()\r\n    auth2.signOut().then(() => {\r\n      this.setState({\r\n        name: null,\r\n        password: null,\r\n      })\r\n    })\r\n  }\r\n  render() {\r\n    const { name, password } = this.state\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n          {!name && <button onClick={this.signIn}>Log in</button>}\r\n          {!!name && <button onClick={this.signOut}>Log out</button>}\r\n            {name}\r\n        </header>\r\n        \r\n      </div>\r\n      \r\n      )\r\n    }\r\n  }\r\n  \r\n  export default AuthG"]},"metadata":{},"sourceType":"module"}